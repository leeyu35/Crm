webpackJsonp([30],{651:function(e,t,o){var a=o(255),n=o(252);o(652),o(653),n.registerVisual(a.curry(o(357),"funnel")),n.registerLayout(o(654)),n.registerProcessor(a.curry(o(360),"funnel"))},652:function(e,t,o){"use strict";var a=o(349),n=o(256),i=o(353),l=o(252).extendSeriesModel({type:"series.funnel",init:function(e){l.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._dataBeforeProcessed},this._defaultLabelLine(e)},getInitialData:function(e,t){var o=i(["value"],e.data),n=new a(o,this);return n.initData(e.data),n},_defaultLabelLine:function(e){n.defaultEmphasis(e.labelLine,["show"]);var t=e.labelLine.normal,o=e.labelLine.emphasis;t.show=t.show&&e.label.normal.show,o.show=o.show&&e.label.emphasis.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{normal:{show:!0,position:"outer"},emphasis:{show:!0}},labelLine:{normal:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},emphasis:{}},itemStyle:{normal:{borderColor:"#fff",borderWidth:1},emphasis:{}}}});e.exports=l},653:function(e,t,o){function a(e,t){function o(){l.ignore=l.hoverIgnore,r.ignore=r.hoverIgnore}function a(){l.ignore=l.normalIgnore,r.ignore=r.normalIgnore}i.Group.call(this);var n=new i.Polygon,l=new i.Polyline,r=new i.Text;this.add(n),this.add(l),this.add(r),this.updateData(e,t,!0),this.on("emphasis",o).on("normal",a).on("mouseover",o).on("mouseout",a)}function n(e,t,o,a){var n=a.getModel("textStyle"),i=a.get("position"),r="inside"===i||"inner"===i||"center"===i;return{fill:n.getTextColor()||(r?"#fff":e.getItemVisual(t,"color")),textFont:n.getFont(),text:l.retrieve(e.hostModel.getFormattedLabel(t,o),e.getName(t))}}var i=o(294),l=o(255),r=a.prototype,s=["itemStyle","normal","opacity"];r.updateData=function(e,t,o){var a=this.childAt(0),n=e.hostModel,r=e.getItemModel(t),d=e.getItemLayout(t),c=e.getItemModel(t).get(s);c=null==c?1:c,a.useStyle({}),o?(a.setShape({points:d.points}),a.setStyle({opacity:0}),i.initProps(a,{style:{opacity:c}},n,t)):i.updateProps(a,{style:{opacity:c},shape:{points:d.points}},n,t);var p=r.getModel("itemStyle"),u=e.getItemVisual(t,"color");a.setStyle(l.defaults({lineJoin:"round",fill:u},p.getModel("normal").getItemStyle(["opacity"]))),a.hoverStyle=p.getModel("emphasis").getItemStyle(),this._updateLabel(e,t),i.setHoverStyle(this)},r._updateLabel=function(e,t){var o=this.childAt(1),a=this.childAt(2),l=e.hostModel,r=e.getItemModel(t),s=e.getItemLayout(t),d=s.label,c=e.getItemVisual(t,"color");i.updateProps(o,{shape:{points:d.linePoints||d.linePoints}},l,t),i.updateProps(a,{style:{x:d.x,y:d.y}},l,t),a.attr({style:{textAlign:d.textAlign,textVerticalAlign:d.verticalAlign,textFont:d.font},rotation:d.rotation,origin:[d.x,d.y],z2:10});var p=r.getModel("label.normal"),u=r.getModel("label.emphasis"),g=r.getModel("labelLine.normal"),h=r.getModel("labelLine.emphasis");a.setStyle(n(e,t,"normal",p)),a.ignore=a.normalIgnore=!p.get("show"),a.hoverIgnore=!u.get("show"),o.ignore=o.normalIgnore=!g.get("show"),o.hoverIgnore=!h.get("show"),o.setStyle({stroke:c}),o.setStyle(g.getModel("lineStyle").getLineStyle()),a.hoverStyle=n(e,t,"emphasis",u),o.hoverStyle=h.getModel("lineStyle").getLineStyle()},l.inherits(a,i.Group);var d=o(293).extend({type:"funnel",render:function(e,t,o){var n=e.getData(),i=this._data,l=this.group;n.diff(i).add(function(e){var t=new a(n,e);n.setItemGraphicEl(e,t),l.add(t)}).update(function(e,t){var o=i.getItemGraphicEl(t);o.updateData(n,e),l.add(o),n.setItemGraphicEl(e,o)}).remove(function(e){var t=i.getItemGraphicEl(e);l.remove(t)}).execute(),this._data=n},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});e.exports=d},654:function(e,t,o){function a(e,t){return l.getLayoutRect(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function n(e,t){for(var o=e.mapArray("value",function(e){return e}),a=[],n="ascending"===t,i=0,l=e.count();i<l;i++)a[i]=i;return a.sort(function(e,t){return n?o[e]-o[t]:o[t]-o[e]}),a}function i(e){e.each(function(t){var o,a,n,i,l=e.getItemModel(t),r=l.getModel("label.normal"),s=r.get("position"),d=l.getModel("labelLine.normal"),c=e.getItemLayout(t),p=c.points,u="inner"===s||"inside"===s||"center"===s;if(u)a=(p[0][0]+p[1][0]+p[2][0]+p[3][0])/4,n=(p[0][1]+p[1][1]+p[2][1]+p[3][1])/4,o="center",i=[[a,n],[a,n]];else{var g,h,m,f=d.get("length");"left"===s?(g=(p[3][0]+p[0][0])/2,h=(p[3][1]+p[0][1])/2,m=g-f,a=m-5,o="right"):(g=(p[1][0]+p[2][0])/2,h=(p[1][1]+p[2][1])/2,m=g+f,a=m+5,o="left");var y=h;i=[[g,h],[m,y]],n=y}c.label={linePoints:i,x:a,y:n,verticalAlign:"middle",textAlign:o,inside:u}})}var l=o(272),r=o(258),s=r.parsePercent;e.exports=function(e,t,o){e.eachSeriesByType("funnel",function(e){var o=e.getData(),l=e.get("sort"),d=a(e,t),c=n(o,l),p=[s(e.get("minSize"),d.width),s(e.get("maxSize"),d.width)],u=o.getDataExtent("value"),g=e.get("min"),h=e.get("max");null==g&&(g=Math.min(u[0],0)),null==h&&(h=u[1]);var m=e.get("funnelAlign"),f=e.get("gap"),y=(d.height-f*(o.count()-1))/o.count(),v=d.y,w=function(e,t){var a,n=o.get("value",e)||0,i=r.linearMap(n,[g,h],p,!0);switch(m){case"left":a=d.x;break;case"center":a=d.x+(d.width-i)/2;break;case"right":a=d.x+d.width-i}return[[a,t],[a+i,t]]};"ascending"===l&&(y=-y,f=-f,v+=d.height,c=c.reverse());for(var b=0;b<c.length;b++){var x=c[b],S=c[b+1],_=w(x,v),F=w(S,v+y);v+=y+f,o.setItemLayout(x,{points:_.concat(F.slice().reverse())})}i(o)})}},650:function(e,t,o){"use strict";var a=o(252);o(651),o(395),o(399);var n={renderSingleFunnel:function(e,t){var o=a.init(document.getElementById(e)),n={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}"},legend:{data:["展现","点击","下载","激活"],orient:"vertical",right:10,bottom:10},color:["#48c9b0","#64cd64","#ec5a55","#faaa3a"],calculable:!0,series:[{name:"漏斗图",type:"funnel",left:"10%",top:60,bottom:60,minSize:"0%",maxSize:"100%",width:"80%",sort:"descending",label:{normal:{show:!0,position:"left",formatter:"{b}:{c}"},emphasis:{textStyle:{fontSize:20}}},labelLine:{normal:{length:10,lineStyle:{width:1,type:"solid"}}},itemStyle:{normal:{borderColor:"#fff",borderWidth:1}},data:t}]};o.setOption(n),window.addEventListener("resize",function(){o.resize()},!1)},renderFunnel:function(e){var t=[];t[0]={value:e.total_view,name:"展现"},t[1]={value:e.total_pv,name:"点击"},t[2]={value:e.total_count,name:"下载"},t[3]={value:e.total_active,name:"激活"},this.renderSingleFunnel("funnel",t)}};e.exports=n},648:function(e,t,o){"use strict";function a(e){for(var t=[],o=0;o<e.length;o++)t.push({name:e[o].name,type:"line",line:"总量",data:e[o].data,symbol:"circle",symbolSize:5,smooth:!0,itemStyle:{normal:{lineStyle:{width:2}},emphasis:{label:{show:!0}}}});return t}var n=o(252);o(351),o(361),o(395),o(399),o(400);var i={renderLine:function(e,t,o,i,l){var r=a(l),s=n.init(document.getElementById(e)),d={tooltip:{trigger:"axis"},legend:{orient:"horizontal",selected:o,data:i,right:10},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack","tiled"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#3b4e61",fontSize:14}},data:t}],yAxis:[{type:"value",position:"left",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#3b4e61",fontSize:14}},splitLine:{show:!0,lineStyle:{color:"#dfe1e4",type:"solid",width:1}}}],series:r};s.setOption(d),window.addEventListener("resize",function(){s.resize()},!1)}};e.exports=i},649:function(e,t,o){"use strict";var a=o(252);o(351),o(395),o(399);var n={renderSinglePie:function(e,t,o){var n={normal:{color:"#f5f7f9",label:{show:!1},labelLine:{show:!1}},emphasis:{color:"#f5f7f9",label:{show:!1},labelLine:{show:!1}}},i=a.init(document.getElementById(e)),l={title:{text:t,top:"27%",left:"center",textStyle:{color:"#3b4e61",fontSize:14,fontWeight:"normal"}},legend:{data:["今日","昨日"],bottom:20},series:[{name:"昨日",hoverAnimation:!1,type:"pie",clockWise:!0,radius:["40%","50%"],itemStyle:{normal:{color:"#00b7ee",label:{show:!1},labelLine:{show:!1}}},data:[{value:o[2],label:{normal:{show:!0,position:"outside",formatter:"{d}%"},emphasis:{show:!0,position:"outside"}},labelLine:{normal:{length:2,length2:4,show:!0,position:"outside"},emphasis:{show:!0,position:"outside"}},name:"昨日对比率"},{value:o[3],name:"invisible",itemStyle:n}]},{name:"今日",hoverAnimation:!1,type:"pie",clockWise:!0,radius:["29%","39%"],itemStyle:{normal:{color:"#ec5a55",label:{show:!1},labelLine:{show:!1}}},data:[{value:o[0],label:{normal:{show:!0,position:"center",formatter:"{d}%"},emphasis:{show:!0,position:"center"}},labelLine:{normal:{length:2,length2:4,show:!0,position:"center"},emphasis:{show:!0,position:"center"}},name:"今日对比率"},{value:o[1],name:"invisible",itemStyle:n}]}]};i.setOption(l),window.addEventListener("resize",function(){i.resize()},!1)},renderPie:function(e){var t=[],o=[],a=[];t[0]=(parseFloat(e.total_pv)/parseFloat(e.total_view)*100).toFixed(1),t[1]=100-(parseFloat(e.total_pv)/parseFloat(e.total_view)*100).toFixed(1),t[2]=(parseFloat(e.yestoday_total_pv)/parseFloat(e.yestoday_total_view)*100).toFixed(1),t[3]=100-(parseFloat(e.yestoday_total_pv)/parseFloat(e.yestoday_total_view)*100).toFixed(1),o[0]=(parseFloat(e.total_count)/parseFloat(e.total_pv)*100).toFixed(1),o[1]=100-(parseFloat(e.total_count)/parseFloat(e.total_pv)*100).toFixed(1),o[2]=(parseFloat(e.yestoday_total_count)/parseFloat(e.yestoday_total_pv)*100).toFixed(1),o[3]=100-(parseFloat(e.yestoday_total_count)/parseFloat(e.yestoday_total_pv)*100).toFixed(1),a[0]=parseFloat(e.active_rate),a[1]=100-parseFloat(e.active_rate),a[2]=parseFloat(e.yestoday_active_rate),a[3]=100-parseFloat(e.yestoday_active_rate),console.log(t),console.log(o),console.log(a),this.renderSinglePie("pie","点击率",t),this.renderSinglePie("pie1","下载率",o),this.renderSinglePie("pie2","激活率",a)}};e.exports=n},647:function(e,t){},0:function(e,t,o){(function(e){"use strict";function t(e,t){1===t?n.ajax(s.getApiUrl("getAccountTwoWeek"),{c1:e}).done(function(e){for(var t=[],o=[],a=[],n=[],l=[],r=[],s={},d=[],c=[],p=0;p<e.length;p++)t.push(parseFloat(e[p].active_rate)),o.push(e[p].date),a.push(parseFloat(e[p].download_rate)),n.push(e[p].cost),l.push(e[p].total_pv),r.push(e[p].total_count);c[0]={name:"总消费",data:n,time:o},c[1]={name:"按钮点击",data:r,time:o},c[2]={name:"H5展现",data:l,time:o},c[3]={name:"下载率",data:a,time:o},c[4]={name:"激活率",data:t,time:o},s={"按钮点击":!1,"总消费":!1,"下载率":!1,"激活率":!1},d=["总消费","按钮点击","H5展现","下载率","激活率"],i.renderLine("mainn",o,s,d,c)}):2===t&&n.ajax(s.getApiUrl("getAccountWeekCost"),{appid:e}).done(function(e){var t=[],o=[],a=[],n={},l=[];if(0!==e.length){for(var r=0;r<e.data.length;r++)t[r]=e.data[r].date;for(var s=0;s<e.data.length;s++)o.push(e.data[s].cost)}a[0]={name:"消费",type:"line",symbol:"emptyCircle",symbolSize:3,line:"总量",data:o,smooth:!0,itemStyle:{normal:{lineStyle:{width:2}},emphasis:{label:{show:!0}}}},n={"消费":!0},l=["消费"],i.renderLine("mainn",t,n,l,a)})}function a(o,a){t(o,a),n.ajax(s.getApiUrl("getAccountAll"),{c1:o}).done(function(t){console.log(t),null===t.mobileBalance&&(t.mobileBalance="无"),"success"!=t.msg&&e("#page-wrapper").prepend("<div class='alert'><a href='#' class='close' data-dismiss='alert'>&times;</a><strong>提示：</strong>"+t.msg+"</div>"),e(".apie1").text("￥"+parseFloat(t.mobileBalance).toLocaleString()),e(".month").text("￥"+parseFloat(t.monthCost).toLocaleString()),e(".today").text("￥"+parseFloat(t.cost).toLocaleString()),e(".yesterday").text("￥"+parseFloat(t.yesterdayCost).toLocaleString()),e(".ziyuan").text(Math.round(parseFloat(t.mobileBalance)/parseFloat(t.yesterdayCost)));var o=Math.round(parseFloat(t.mobileBalance)/parseFloat(t.yesterdayCost));o>10?e(".wen").hover(function(){e(".jinggao").css("background","#64cd64"),e(".jinggao").fadeIn()},function(){e(".jinggao").fadeOut()}):o>3?e(".wen").hover(function(){e(".jinggao").css("background","#f0cf19"),e(".jinggao").fadeIn()},function(){e(".jinggao").fadeOut()}):(e(".jinggao").css("background","#ec5a55"),e(".jinggao").fadeIn()),l.renderPie(t),r.renderFunnel(t)})}o(85);var n=o(117);o(238),o(647);var i=o(648),l=o(649),r=o(650),s=o(199),d=1,c=o(116),p=o(191),u=p.getCurrentAccount();c.on("account_change",function(){u=p.getCurrentAccount(),a(u.appid,d)}),e(function(){e(".near_twoweek").click(function(){d=1,e("#dropdownMenu1").html('近两周总体数据 <span class="caret"></span>'),t(u.appid,d)}),e(".near_week").click(function(){d=2,e("#dropdownMenu1").html('每周总消费趋势 <span class="caret"></span>'),t(u.appid,d)}),console.log(u.appid),a(u.appid,d)})}).call(t,o(83))}});